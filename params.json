{"name":"Guzzlebundle","tagline":"Debug your API Calls with a Symfony web profiler for guzzle","body":"# Playbloom Guzzle Bundle\r\n\r\nProvide a basic logger and an advanced profiler for Guzzle\r\n\r\n* The basic logger use the default Symfony app logger, it's safe to use in your production environement.\r\n* The advanced profiler is for debug purposes and will display a dedicated report available in the toolbar and Symfony Web Profiler\r\n\r\n<img src=\"../images/guzzle-profiler-panel.png\" witdh=\"280\" height=\"175\" alt=\"Guzzle Symfony web profiler panel\">\r\n<img src=\"../images/guzzle-request-detail.png\" witdh=\"280\" height=\"175\" alt=\"Guzzle Symfony web profiler panel - request details\">\r\n<img src=\"../images/guzzle-response-detail.png\" witdh=\"280\" height=\"175\" alt=\"Guzzle Symfony web profiler panel - response details\">\r\n\r\n## Installation\r\n\r\nAdd the composer requirements (will be soon on packagist)\r\n```javascript\r\n{\r\n    \"require-dev\": {\r\n        \"playbloom/guzzle-bundle\": \"dev-master\"\r\n    },\r\n\r\n    \"repositories\": [\r\n        {\r\n            \"type\": \"git\",\r\n            \"url\": \"git://github.com/ludofleury/GuzzleBundle.git\"\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nAdd the bundle to your Symfony app kernel\r\n```php\r\n<?php\r\n    // in %your_project%/app/AppKernel.php\r\n    $bundles[] = new Playbloom\\Bundle\\GuzzleBundle\\PlaybloomGuzzleBundle();\r\n?>\r\n```\r\n\r\nTo enable the advanced profiler & the toolbar/web profiler panel, add this line to your `app/config/config_dev.yml`\r\n```yml\r\nplaybloom_guzzle:\r\n    web_profiler: true\r\n```\r\n\r\n### Guzzle client as a Symfony service\r\n\r\nConcrete [Guzzle client creation](http://guzzlephp.org/tour/building_services.html#create-a-client) can be easily managed by the Symfony service container thanks to a [simple factory configuration](http://symfony.com/doc/current/components/dependency_injection/factories.html), in this case, you just need to tag your guzzle service(s) with `playbloom_guzzle.client`.\r\n\r\nIt will add the basic logger to your client(s). If the web_profiler is enabled in the current environement, it will also add the advanced profiler and display report on the Symfony toolbar/web profiler.\r\n\r\n```xml\r\n<service id=\"acme.client\"\r\n    class=\"%acme.client.class%\"\r\n    factory-class=\"%acme.client.class%\"\r\n    factory-method=\"factory\">\r\n    <!-- your arguments -->\r\n    <tag name=\"playbloom_guzzle.client\" />\r\n</service>\r\n```\r\n\r\n### Add the logger/profiler manually to a Guzzle client\r\n\r\nIf you need to handle the registration of the logger or profiler plugin manually, you can retrieve theses services from the Symfony container.\r\n\r\n```php\r\n<?php\r\n\r\n$client = new \\Guzzle\\Http\\Client('https://my.api.com');\r\n\r\n// basic logger service plugged & configured with the default Symfony app logger\r\n$loggerPlugin = $container->get('playbloom_guzzle.client.plugin.logger');\r\n$client->addSubscriber($loggerPlugin);\r\n\r\n// advanced profiler for developement and debug, requires web_profiler to be enabled\r\n$profilerPlugin = $container->get('playbloom_guzzle.client.plugin.profiler');\r\n$client->addSubscriber($profilerPlugin);\r\n\r\n?>\r\n```\r\n\r\n## Customize your own profiler panel\r\n\r\nIf you need a [custom profiler panel](http://symfony.com/doc/master/cookbook/profiler/data_collector.html) you can extend/reuse easily the data collector and profiler template from this bundle.\r\n\r\nFor example, you have a GithubBundle which interact with the Github API. You also have a Github profiler panel to debug your developement and you want to have the API requests profiled in this panel.\r\n\r\nIt's quite easy:\r\nFirst, define your own `GithubDataCollector` extending the `Playbloom\\Bundle\\GuzzleBundle\\DataCollector\\GuzzleDataCollector`\r\n\r\n\r\nThen extends the guzzle web profiler template\r\n```twig\r\n{% extends 'PlaybloomGuzzleBundle:Collector:guzzle.html.twig' %}\r\n\r\n{% block panel %}\r\n    <div class=\"github\">\r\n        <h2>Github</h2>\r\n        <ul>\r\n            <li><strong>Github API key:</strong> {{ collector.getApiKey }}</li>\r\n            <!-- Some custom information -->\r\n        </ul>\r\n    </div>\r\n\r\n    {% include 'PlaybloomGuzzleBundle:Profiler:requests.html.twig' with {'requests': collector.requests } %}\r\n{% endblock %}\r\n```\r\n\r\nAnd finally declare your data collector\r\n```xml\r\n<service id=\"data_collector.github\" class=\"Acme\\GithubBundle\\DataCollector\\GithubDataCollector\">\r\n    <argument type=\"service\" id=\"playbloom_guzzle.client.plugin.profiler\"/>\r\n    <tag name=\"data_collector\"\r\n        template=\"AcmeGithubBundle:Collector:github\"\r\n        id=\"github\"/>\r\n</service>\r\n```\r\n\r\nThat's it, now your profiler panel display your custom informations and the Guzzle API requests.\r\n\r\n## TODO\r\n\r\n* Add extra information about the client configuration itself (thanks to the guzzle service builder?)\r\n* Add clients|host|endpoint|time filters for http requests\r\n\r\n## Licence\r\n\r\nThis bundle is under the MIT license. See the complete license in the bundle:\r\n\r\n    Resources/meta/LICENSE\r\n\r\n## Credits\r\n\r\n* Swagger for the UI\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}